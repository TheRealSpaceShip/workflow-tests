name: 'Test'

on:
  workflow_dispatch:
    inputs:
      stringInput:
        description: 'This is string input'
        required: false
        default: 'stringInput'
      booleanInput:
        type: boolean
        description: 'This is boolean input'
        required: false
        default: false
      choiseInput:
        type: choice
        description: 'This is choise input'
        required: false
        options:
          - choise1
          - choise2
          - choise3
        default: 'choise2'

jobs:
  test:
    runs-on: 'ubuntu-latest'
    steps:
      - name: Test
        run: env | sort

  test-condition:
    runs-on: 'ubuntu-latest'
    if: inputs.booleanInput
    steps:
      -
        id: 'test'
        name: 'Test inputs with conditions'
        env:
          STRING_INPUT: ${{ inputs.stringInput }}
          BOOLEAN_INPUT: ${{ inputs.booleanInput }}
          CHOISE_INPUT: ${{ inputs.choiseInput }}
        run: |
          echo "STRING_INPUT=$STRING_INPUT"
          echo "BOOLEAN_INPUT=$BOOLEAN_INPUT"
          echo "CHOISE_INPUT=$CHOISE_INPUT"

  test-negative-condition:
    runs-on: 'ubuntu-latest'
    if: '!inputs.booleanInput'
    steps:
      -
        id: 'test'
        name: 'Test inputs'
        env:
          STRING_INPUT: ${{ inputs.stringInput }}
          BOOLEAN_INPUT: ${{ inputs.booleanInput }}
          CHOISE_INPUT: ${{ inputs.choiseInput }}
        run: |
          echo "STRING_INPUT=$STRING_INPUT"
          echo "BOOLEAN_INPUT=$BOOLEAN_INPUT"
          echo "CHOISE_INPUT=$CHOISE_INPUT"
